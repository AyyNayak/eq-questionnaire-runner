{% import 'macros/forms.html' as form %}

<div class="question question--{{question.type|lower}} {% if question.error %}question--has-errors{% endif %}" id="question-{{question.id}}">

  {% set question_description %}
    {%- if question.description %}
      <div class="question__description" id="description-{{question.id}}">
        {{question.description|safe}}
      </div>
    {% endif %}
  {% endset %}

  {% if question.responses|length > 1 %}

    <fieldset class="question__fieldset">

      <legend class="question__legend">
        <div class="question__title">{{question.title}}</div>
        {%- if question.subtitle -%}
          <div class="question__subtitle">{{question.subtitle}}</div>
        {%- endif %}
      </legend>

      {{question_description|safe}}

      <div class="question__responses">
        {%- for response in question.responses -%}
          {% include 'partials/response.html' %}
        {%- endfor -%}
      </div>

    </fieldset>

  {% else %}

  {{question_description|safe}}

  <div class="question__responses">
    {%- for question_response in question.responses -%}
      {% with %}
        {% if question.title %}
          {% set response = question_response|merge({'label': question.title}) %}
        {% else %}
          {% set response = question_response %}
        {% endif %}
        {% include 'partials/response.html' %}
      {% endwith %}
    {%- endfor -%}
  </div>

  {% endif %}


</div>
