{% import 'macros/forms.html' as form %}

{% macro response(partial, data) %}
  {%- set markup %}
  <div class="field field--{{partial}}">
  {% set response = data %}
  {% set question = {} %}
  {% include 'partials/responses/' ~ partial ~ '.html' %}
  </div>
  {% endset -%}
  <div class="ptn-example">
  {{markup|prettify|safe}}
  </div>
  {{code(markup)}}
{% endmacro %}

{% macro example(markup) %}
  <div class="ptn-example">
    {{markup|prettify|safe}}
  </div>
  {{code(markup)}}
{% endmacro %}

{% macro question(data) %}
  {% set question = data %}
  <div class="ptn-example">
  {%- set markup %}
    {% include 'partials/question.html' %}
  {% endset -%}

  {{markup|prettify|safe}}
  </div>
  {{code(markup)}}
{% endmacro %}

{% macro code(markup, toggleable=true) %}
  <div class="ptn-code {{'is-toggleable' if toggleable}}">
    {% if toggleable %}
      {% set id = "ptn-code-" ~ range(10000)|random() %}
      <input class="ptn-code-toggle" type="checkbox" id="{{id}}">
      <label class="ptn-code-toggle-label" for="{{id}}">View code</label>
    {% endif %}
    <div class="ptn-code-highlight">
{% filter markdown %}
```markup
{{markup|prettify|safe}}
```
{% endfilter %}
    </div>
  </div>
{% endmacro %}

{% macro grid(max) -%}
<div class="ptn-grid">
  <div class="grid">
    {% for i in range(1, (max + 1)) %}
      <div class="grid__col col-{{(12/max)|round|int}}@m">
        <div class="ptn-col">1 of {{max}}</div>
      </div>
    {% endfor %}
  </div>
</div>
{%- endmacro %}
