{% extends 'layouts/_survey.html' -%}

{% block page_title -%}Summary{% endblock -%}

{% block survey -%}
  <div class="header">
    <h1 class="header__title h1">Your responses</h1>
    <h2 class="header__subtitle">Please check carefully before submission</h2>
  </div>

<div>

  <dl class="dl">

  {%- for group in questionnaire.data.groups -%}

    {%- for block in group.blocks -%}

      {%- for section in block.sections -%}

        {%- for question in section.questions -%}

          {%- for response in question.responses -%}

            {% if response.type == 'DateRange' %}

              {% if loop.index == 2 %}
                <dt class="dt">{{question.title}}</dt>
                <dd class="dd">
                  {{question.responses[loop.index0 - 1].label}}: {{question.responses[loop.index0 - 1].value}}<br>
                  {{response.label}}: {{response.value}}
                </dd>
              {% endif %}

            {% elif response.type == 'Currency' %}

              {% set response_value = response.value|int|format_currency if response.value|length > 0 else 'N/A' %}

              <dt class="dt">{{response.label}}</dt>
              <dd class="dd">{{response_value}}</dd>

            {% else %}

              {% set response_value = response.value if response.value|length > 0 else 'N/A' %}

              <dt class="dt fw">{{response.label}}</dt>
              <dd class="dd fw">{{response_value}}</dd>

            {% endif %}

          {%- endfor -%}

        {% endfor -%}

      {% endfor -%}

    {% endfor -%}

  {% endfor -%}

  </dl>
  <form action="" method="POST" novalidate>
    <button class="btn u-mr-s" type="submit" name="action[save_continue]">Submit answers</button>
    <a class="u-dib" href="/questionnaire">Change your answers</a>
  </form>
</div>

{% endblock -%}
